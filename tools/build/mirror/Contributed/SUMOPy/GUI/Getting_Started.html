<a id="top"></a>

						<div class="mw-indicators">
</div>
			<h1 id="firstHeading" class="firstHeading" lang="en">Contributed/SUMOPy/GUI/Getting Started</h1>
						<div id="bodyContent" class="mw-body-content">
									<div id="siteSub">From Sumo</div>
								<div id="contentSub"></div>
												
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Running_SUMOPy"><span class="tocnumber">1</span> <span class="toctext">Running SUMOPy</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Opening.2Fcreating_a_scenario"><span class="tocnumber">2</span> <span class="toctext">Opening/creating a scenario</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Browsing_the_scenario"><span class="tocnumber">3</span> <span class="toctext">Browsing the scenario</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Navigating_the_Network"><span class="tocnumber">4</span> <span class="toctext">Navigating the Network</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Simulating_the_scenario"><span class="tocnumber">5</span> <span class="toctext">Simulating the scenario</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Viewing_results"><span class="tocnumber">6</span> <span class="toctext">Viewing results</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Launching_SUMOPy"><span class="tocnumber">7</span> <span class="toctext">Launching SUMOPy</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#Loading_a_binary_scenario_at_start"><span class="tocnumber">7.1</span> <span class="toctext">Loading a binary scenario at start</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Importing_SUMO_XML_files_at_start"><span class="tocnumber">7.2</span> <span class="toctext">Importing SUMO XML files at start</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-10"><a href="#Importing_and_Editing_networks"><span class="tocnumber">8</span> <span class="toctext">Importing and Editing networks</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="#Importing_nets_and_buldings"><span class="tocnumber">8.1</span> <span class="toctext">Importing nets and buldings</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Editing_with_SUMO.E2.80.99s_Netedit"><span class="tocnumber">8.2</span> <span class="toctext">Editing with SUMO’s Netedit</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Editing_with_SUMO.E2.80.99s_Netedit_on_background_maps"><span class="tocnumber">8.3</span> <span class="toctext">Editing with SUMO’s Netedit on background maps</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Editing_with_SUMOPy_Networkeditor"><span class="tocnumber">8.4</span> <span class="toctext">Editing with SUMOPy Networkeditor</span></a></li>
</ul>
</li>
</ul>
</div>

<h3><span class="mw-headline" id="Running_SUMOPy">Running SUMOPy</span></h3>
<p>Start the script <code>sumopy_gui.py</code> by double-clicking on it in your browser. If this fails, use a command-line application, change directory to
</p><p><code>SUMOHOME/tools/contributed/sumopy</code>
</p><p>and run sumopy with
</p><p><code>python sumopy_gui.py</code>
</p><p>If all required packages are installed correctly, you should see the main window as shown <a href="../../../images/Fig_sumopy_gui_main.png" title="File:Fig sumopy gui main.png">here</a>, but initially with an empty network. The object browser shows initially the main object of SUMOPy: the <i>scenario</i>, which contains all other information.
</p>
<div class="center"><div class="floatnone"><a href="../../../images/Fig_sumopy_gui_main.png" class="image" title="Sumopy main window with object browser, network editor and main menu"><img alt="Sumopy main window with object browser, network editor and main menu" src="../../../images/Fig_sumopy_gui_main.png" width="760" height="442" srcset="/w/images/thumb/c/c4/Fig_sumopy_gui_main.png/1140px-Fig_sumopy_gui_main.png 1.5x, /w/images/thumb/c/c4/Fig_sumopy_gui_main.png/1520px-Fig_sumopy_gui_main.png 2x" /></a></div></div>
<h3><span class="mw-headline" id="Opening.2Fcreating_a_scenario">Opening/creating a scenario</span></h3>
<p>There is a test scenario in the SUMOPy distribution which is located in
</p><p><code>SUMOHOME/tools/contributed/sumopy/testscenario</code>
</p><p>The quickest way to obtain results from a simulation is to import already existing <code>xml</code>-files. In case the following SUMO network, poly and route files
</p><p><code>demo.net.xml  demo.poly.xml  demo.rou.xml </code>
</p><p>are located in directory
</p><p><code>SUMOHOME/tools/contributed/sumopy/testscenario</code>
</p><p>then a new scenario can be created by importing these files into SUMOPy at ones: from the main menu, choose <code>Scenario&gt;Create from xml...</code> and insert the scenario Shortname, and Workdir in the form as shown <a href="../../../images/Fig_sumopy_gui_newscenario.png" title="File:Fig sumopy gui newscenario.png">here</a>.
</p>
<div class="center"><div class="floatnone"><a href="../../../images/Fig_sumopy_gui_newscenario.png" class="image" title="New scenario dialog"><img alt="New scenario dialog" src="../../../images/Fig_sumopy_gui_newscenario.png" width="600" height="452" srcset="/w/images/7/7d/Fig_sumopy_gui_newscenario.png 1.5x, /w/images/7/7d/Fig_sumopy_gui_newscenario.png 2x" /></a></div></div>
<p>The options <code> Name</code> and <code> Description</code> are free text fields. After pressing the <code> Run</code> button, network, buildings and routes will be imported. In case the trip file <code> demo.trip.xml</code> exists, it will also be imported.
</p><p>In the same way it is possible to crate an empty scenario under menu <code>Scenario&gt;New...</code>.
</p>
<h3><span class="mw-headline" id="Browsing_the_scenario">Browsing the scenario</span></h3>
<p>The object browser allows to navigate through all information of a scenario. To a certain extend, it is possible to modify data. The most important information are:
</p>
<ul><li> The network with edges, nodes, traffic light systems etc.</li>
<li> The landuse, containing also the building information from the .poly| file as well as background maps (see later how to import them).</li>
<li> The demand holds information on available vehicles types, trips and routes.</li></ul>
<h3><span class="mw-headline" id="Navigating_the_Network">Navigating the Network</span></h3>
<p>The network can be examined with the network editor. The initial editing tool allows to click on the different network elements and retrieve the respective information in the object browser.
</p><p>With the zoom-buttons (+,-) located below the network editor, different zoom levels can be obtained The 1:1 button zooms the network to fit approximately the boundaries of the window. Next to the zoom button is a button which pops up a menu when pressed. From this menu, the network elements to be drawn can be selected or un-selected.
</p><p>The following mouse-key combination allow to navigate the network:
</p>
<table>
<tr>
<th>Action
</th>
<th>Key-Mouse
</th></tr>
<tr>
<td>Zoom in/Out
</td>
<td>Hold down <code>&lt;CTRL&gt;</code> + <code>&lt;Wheel&gt;</code>
</td></tr>
<tr>
<td>Panning
</td>
<td>Hold down <code>&lt;CTRL&gt;</code> + <code>&lt;SHIFT&gt;</code> + <code>&lt;Button-Left&gt;</code>
</td></tr></table>
<p><br />
</p>
<h3><span class="mw-headline" id="Simulating_the_scenario">Simulating the scenario</span></h3>
<p>From the main menu select:
</p><p><code>Simulation&gt;Sumo&gt;export routes and simulate...</code>
</p><p>With this process, the current trips and routes in <code> demand.trips</code> will be automatically exported to a SUMO <code> .rou</code> file. Choose the desired simulation settings from the SUMO pop-up dialog, as shown in Fig. <a href="../../../images/Fig_sumopy_gui_sumo.png" title="File:Fig sumopy gui sumo.png">here</a>.
</p>
<div class="center"><div class="floatnone"><a href="../../../images/Fig_sumopy_gui_sumo.png" class="image" title="SUMO pop-up dialog."><img alt="SUMO pop-up dialog." src="../../../images/Fig_sumopy_gui_sumo.png" width="600" height="675" class="thumbborder" srcset="/w/images/3/3a/Fig_sumopy_gui_sumo.png 1.5x, /w/images/3/3a/Fig_sumopy_gui_sumo.png 2x" /></a></div></div>
<p>The simulation parameters are self-explaining, just hover with the mouse over the parameter name. The default parameters are typically suitable to run a first simulation. Select one of the output options in order to obtain specific simulation results. Regarding outputs, the <code> Output Sampling Time</code> for the different outputs may be of interest. If you observe in the simulations that vehicles get blocked at junctions for no obvious reason, then it is possible to resolve conflicts by setting the <code> Teleport</code> to a positive time (i.e. 10s).
</p><p>After pressing the <code> run</code> button, the SUMO-GUI interface pops up, ready for simulation, as shown Fig. <a href="/w/index.php?title=File:Fig_sumopy_gui_sumogui&amp;action=edit&amp;redlink=1" class="new" title="File:Fig sumopy gui sumogui (page does not exist)">here</a>.
</p>
<div class="center"><div class="floatnone"><a href="../../../images/Fig_sumopy_gui_sumogui.png" class="image" title="SUMO GUI window."><img alt="SUMO GUI window." src="../../../images/Fig_sumopy_gui_sumogui.png" width="800" height="563" class="thumbborder" srcset="/w/images/0/0c/Fig_sumopy_gui_sumogui.png 1.5x, /w/images/0/0c/Fig_sumopy_gui_sumogui.png 2x" /></a></div></div>
<p>Adjust delay time and press the Start button. At the end of the simulation, confirm OK and close the SUMO-GUI window. Simulation results are now imported into SUMOPy and are ready to be examined, visualized and exported in various formats.
</p>
<h3><span class="mw-headline" id="Viewing_results">Viewing results</span></h3>
<p>The results can be viewed in table format and graphically, see  <a href="../../../images/Fig_sumopy_gui_resultviewer.png" title="File:Fig sumopy gui resultviewer.png">here</a>.
</p>
<div class="center"><div class="floatnone"><a href="../../../images/Fig_sumopy_gui_resultviewer.png" class="image" title="Result viewer"><img alt="Result viewer" src="../../../images/Fig_sumopy_gui_resultviewer.png" width="800" height="499" srcset="/w/images/thumb/a/af/Fig_sumopy_gui_resultviewer.png/1200px-Fig_sumopy_gui_resultviewer.png 1.5x, /w/images/a/af/Fig_sumopy_gui_resultviewer.png 2x" /></a></div></div>
<p>In the object browse, the results per trip and the results per edge can be viewed. Both, trip and edge oriented result-table can be exported in CSV format, see the <code> Simulation&gt;Results</code> menu.
</p><p>Results are <i>not</i> saved when saving the scenario. Instead the results must be saved separately using
</p><p><code>Simulation&gt;Results&gt;Save as ...</code>
</p><p>At any time, results can be reopened with the scenario with which they have been produced, using:
</p><p><code>Simulation&gt;Results&gt;Open ...</code>
</p><p>In case the <code> Matplotlib</code> package is installed you can generate plots in various formats, choosing menu <code> Simulation&gt;Results&gt;Plot with matplotlib</code>. The pop-up dialog helps to configure the graphical details of the matplotlib plot.
From the matplotlib figure window, the graphical results can be exported in different file formats (PNG, PDF, JPEG, etc.), 
an example PNG file is shown <a href="../../../images/Fig_demo_noise.png" title="File:Fig demo noise.png">below</a>.
</p><p><br />
</p>
<div class="center"><div class="floatnone"><a href="../../../images/Fig_demo_noise.png" class="image" title="Matplotlib result presentation"><img alt="Matplotlib result presentation" src="../../../images/Fig_demo_noise.png" width="800" height="580" srcset="/w/images/thumb/b/b8/Fig_demo_noise.png/1200px-Fig_demo_noise.png 1.5x, /w/images/thumb/b/b8/Fig_demo_noise.png/1600px-Fig_demo_noise.png 2x" /></a></div></div>
<h2><span class="mw-headline" id="Launching_SUMOPy">Launching SUMOPy</span></h2>
<p>As explained above, networks can be created from SUMO XML files, or a binary file can be loaded. Both operations can be performed from the command line.
</p>
<h3><span class="mw-headline" id="Loading_a_binary_scenario_at_start">Loading a binary scenario at start</span></h3>
<p>A previously saved, binary scenario with filename scenario.obj| can be loaded into SUMOPy at start using the commandline
</p><p>python sumopy-gui.py workdir/scenario.obj|
</p>
<h3><span class="mw-headline" id="Importing_SUMO_XML_files_at_start">Importing SUMO XML files at start</span></h3>
<p>An initial import of existing SUMO XML files with rootname scenario| and located in directory workdir| can be accomplished with
</p><p>python sumopy-gui.py scenario workdir|
</p>
<h2><span class="mw-headline" id="Importing_and_Editing_networks">Importing and Editing networks</span></h2>
<dl><dd> if needed, the network should be modified <i>before</i> moving on to demand modeling (see Sec.[sec<sub>d</sub>emand]).</dd></dl>
<h3><span class="mw-headline" id="Importing_nets_and_buldings">Importing nets and buldings</span></h3>
<p>Networks can be import from a SUMO net.xml file with
</p><p><code>network&gt;import&gt;from sumo net.xml ...</code>
</p><p>Networks can be converted and imported from a previously downloaded OSM file, calling a wizard with:
</p><p><code>network&gt;import&gt;from osm.xml ...</code>
</p><p>Different types of buildings, parks, car parking, leisure areas, etc (in SUMOPy called called “facilities”) 
are a property of the landuse object and can be extracted and imported from an OSM file with menu item
</p><p><code>landuse&gt;facilities&gt;import from osm...</code>
</p><p>Sometimes special characters in the XML file are offending the python XML parser, leading to errors during import. 
If this occurs, simply “clean” the respective OSM file with
</p><p><code>landuse&gt;facilities&gt;clean osm file...</code>
</p><p>prior to importing it.
</p>
<h3><span class="mw-headline" id="Editing_with_SUMO.E2.80.99s_Netedit">Editing with SUMO’s Netedit</span></h3>
<p>The recommended way to edit the network is via netedit|, which is provided with SUMO from version 0.25. SUMO’s netedit| can be called by choosing the menu
</p><p><code>Network&gt;Edit with netedit</code>
</p><p>netedit| will be fired up with the network ready to be edited. The use of netedit| is documented here: <a rel="nofollow" class="external free" href="http://sumo.dlr.de/wiki/NETEDIT">http://sumo.dlr.de/wiki/NETEDIT</a>. After editing, the network must be saved within netedit| be pressing <code>&lt;CTRL&gt;</code>-s or with File&gt;save|. Then netedit| can be closed and the modified network will be reimported into SUMOPy.
</p>
<h3><span class="mw-headline" id="Editing_with_SUMO.E2.80.99s_Netedit_on_background_maps">Editing with SUMO’s Netedit on background maps</span></h3>
<p>There is a possibility to edit the network with netedit| on background maps. Currently these are Google Satellite maps. Before editing with background maps, the maps must be downloaded for the given network area. This is accomplished by a wizard which can be called selecting the menu item<sup id="cite_ref-1" class="reference"><a href="#cite_note-1">[1]</a></sup>.
</p><p><code>landuse&gt;maps&gt;download...</code>
</p><p>The wizard helps to download the squared tiles which cover the network area. The resolution can be defined by setting the tile width (and height) in meters. The tile size in pixel is maximum 1280 (using the Google Map server). The resolution is then tile size/tile width in pixel per meter.
</p><p>it is highly recommended to press the Apply| Button prior to downloading the maps. This will calculate the number of tiles which are going to be downloaded. This is important to know, because Google maps prevent IPs from downloading too many maps of an area. Therefore do not exceed about 300 tiles! Note further that, dependent on the performance of your computer, netedit| may run into problems to handle too large map areas.
</p><p>After the maps are downloaded, netedit| can be called with
</p><p><code>Network&gt;Edit with netedit on map</code>
</p><p>in order to edit the SUMO network on a map.
</p>
<h3><span class="mw-headline" id="Editing_with_SUMOPy_Networkeditor">Editing with SUMOPy Networkeditor</span></h3>
<p>The SUMOPy internal net-editor provides currently some limited capability to edit the network
</p>
<ul><li> The geometry of edges and buildings can be manipulated: Activate the Move| tool to move or the Stretch| to change vertexes.</li>
<li> With the menu <code>Network&gt;Clean nodes</code> all edges entering a node are “cut back” to a certain radius. This measure may facilitate the verification of connections between lanes at junctions.<ol class="references"></li></ul>
<li id="cite_note-1"><span class="mw-cite-backlink"><a href="#cite_ref-1">↑</a></span> <span class="reference-text">In SUMOPy Maps are managed by the landuse object</span>
</li>
</ol>

<!-- 
NewPP limit report
CPU time usage: 0.056 seconds
Real time usage: 0.064 seconds
Preprocessor visited node count: 77/1000000
Preprocessor generated node count: 138/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 - -total
-->

<!-- Saved in parser cache with key sumoSimWiki:pcache:idhash:882-0!*!0!!en!5!* and timestamp 20181010155254 and revision id 10805
 -->
</div>									</div><hr/><div id="lastmod">This page was last modified on 20 May 2018, at 21:42.</div>