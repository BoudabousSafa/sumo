<a id="top"></a>

						<div class="mw-indicators">
</div>
			<h1 id="firstHeading" class="firstHeading" lang="en">Developer/GUI Testing</h1>
						<div id="bodyContent" class="mw-body-content">
									<div id="siteSub">From Sumo</div>
								<div id="contentSub"></div>
												
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p>We are using <a rel="nofollow" class="external text" href="http://sikulix.com/">SikuliX</a>
</p>
<h2><span class="mw-headline" id="Setup">Setup</span></h2>
<ul><li> Java (at least 1.7) should be installed </li>
<li> Linux only: Install dependencies (openSUSE 42.1: <code>zypper in libopencv2_4 libtesseract3 wmctrl xdotool</code>)
<ul><li> openSUSE 42.2 does not have libopencv2_4, you can try this libopencv2 from <a rel="nofollow" class="external text" href="https://build.opensuse.org/package/binaries/home:tokoyami/opencv2-qt5?repository=openSUSE_Leap_42.2">this repo</a> but you will need manual symlinks in /usr/lib64</li></ul></li></ul>
<pre>cd /usr/lib64/
ln -s libopencv_core.so.5.4 libopencv_core.so.2.4
ln -s libopencv_highgui.so.5.4 libopencv_highgui.so.2.4
ln -s libopencv_imgproc.so.5.4 libopencv_imgproc.so.2.4
</pre>
<ul><li><ul><li> ubuntu 18.4 does not provide opencv2.4 any longer. You can <a rel="nofollow" class="external text" href="https://github.com/opencv/opencv/releases">download the source</a> and build it using <a rel="nofollow" class="external text" href="https://stackoverflow.com/questions/40128751/how-to-install-opencv-2-4-13-for-python-2-7-on-ubuntu-16-04">this recipe</a>.</li></ul></li></ul>
<ul><li> Download from <a rel="nofollow" class="external text" href="https://launchpad.net/sikuli/+download">here</a> and move the jar to a separate dir (e.g. $HOME/sikulix).</li>
<li> run setup <code>java -jar sikulix/sikulixsetup-1.1.0.jar</code>
<ul><li> enable the first option and python scripting</li></ul></li>
<li> Define environment variable, e.g. <code>export RUN_SIKULIX=$HOME/sikulix/runsikulix</code>
<ul><li> on Windows <code>set RUN_SIKULIX=C:\sikulix\runsikulix.cmd</code></li></ul></li>
<li> see also <a rel="nofollow" class="external free" href="http://sikulix.com/quickstart/">http://sikulix.com/quickstart/</a></li></ul>
<h2><span class="mw-headline" id="Startup">Startup</span></h2>
<ul><li> run $SUMO_HOME/tests/runNeteditTests.sh (Linux) or&#160;%SUMO_HOME%\tests\runNeteditTests.bat (Windows)
<ul><li> when getting an error about "server not running" double check whether the environment variable is set and try to run the script <code>RUN_SIKULIX</code> points to manually, looking for error messages.</li></ul></li></ul>
<h2><span class="mw-headline" id="Setting_up_a_test">Setting up a test</span></h2>
<p>All tests start are written in Python using the Jython scripting interface of Sikulix. All of them start with the same header:
</p>
<pre>import os
import sys

testRoot = os.path.join(os.environ.get('SUMO_HOME', '.'), 'tests')
neteditTestRoot = os.path.join(os.environ.get('TEXTTEST_HOME', testRoot), 'netedit')
sys.path.append(neteditTestRoot)
import neteditTestFunctions as netedit

# Open netedit
neteditProcess, match = netedit.setupAndStart(neteditTestRoot, True)
</pre>
<p>This code will find the directory with the netedit tests using the TEXTTEST_HOME variable and SUMO_HOME as a fallback. This
enables the start of the tests even outside of Texttest using the runsikulix call directly with the test.sikuli dir.
You should not use relative directories here because this makes copying and moving tests harder.
</p>
<!-- 
NewPP limit report
CPU time usage: 0.008 seconds
Real time usage: 0.008 seconds
Preprocessor visited node count: 11/1000000
Preprocessor generated node count: 16/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 - -total
-->

<!-- Saved in parser cache with key sumoSimWiki:pcache:idhash:713-0!*!*!!*!*!* and timestamp 20181010222102 and revision id 11063
 -->
</div>									</div><hr/><div id="lastmod">This page was last modified on 18 August 2018, at 18:32.</div>